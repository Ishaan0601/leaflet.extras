(()=>{function e(e,t){var a=null;return e&&("string"==typeof t?a=e.properties[t]:"function"==typeof t&&(a=t(e))),a}function t(a,o){var r=[];if(null==a)return r;if("string"==typeof a&&(a=JSON.parse(a)),"Topology"===a.type){var i=[];for(var n in a.objects){var s=topojson.feature(a,a.objects[n]);L.Util.isArray(s)?i=i.concat(s):"features"in s?i=i.concat(s.features):i.push(s)}return t(i,o)}var u=L.Util.isArray(a)?a:a.features;return u?$.each(u,(function(a,i){var n=null,s=null;"Point"===i.geometry.type?(n=parseFloat(i.geometry.coordinates[1]),s=parseFloat(i.geometry.coordinates[0]),n&&s&&(o?r.push([n,s,e(i,o)]):r.push([n,s]))):"MultiPoint"===i.geometry.type&&(r=r.concat(t(i,o)))})):"Feature"===a.type&&$.each(a.geometry.coordinates,(function(t,i){var n,s;n=parseFloat(i[1]),s=parseFloat(i[0]),n&&s&&(o?r.push([n,s,e(a,o)]):r.push([n,s]))})),r}function a(e,a,o,r,i,n){var s=t(a,o);if(!$.isEmptyObject(s)){if(n.gradientTexture){var u=document.getElementById("webgl-heatmap-"+n.gradientTexture+"-attachment");$.isEmptyObject(u)?delete n.gradientTexture:n.gradientTexture=u.href}var l=L.webGLHeatmap(n);l.setData(s),e.layerManager.addLayer(l,"webGLHeatmap",r,i),n.gradientTexture&&(e.zoomOut(),setTimeout((function(){e.zoomIn()}),500))}}LeafletWidget.methods.addWebGLHeatmap=function(e,t,a,o){var r=this;if(!$.isEmptyObject(e)){if(o.gradientTexture){var i=document.getElementById("lfx-webgl-heatmap-"+o.gradientTexture+"-attachment");$.isEmptyObject(i)?(console.log("or in here"),delete o.gradientTexture):(console.log("am i coming in here"),o.gradientTexture=i.href)}console.log("and what is the color now? (options.gradientTexture)"),console.log(o.gradientTexture);var n=L.webGLHeatmap(o);n.setData(e),r.layerManager.addLayer(n,"webGLHeatmap",t,a),o.gradientTexture&&(r.zoomOut(),setTimeout((function(){r.zoomIn()}),500))}},LeafletWidget.methods.addWebGLGeoJSONHeatmap=function(e,t,o,r,i){var n=this;LeafletWidget.utils.isURL(e)?$.getJSON(e,(function(e){a(n,e,t,o,r,i)})):a(n,e,t,o,r,i)},LeafletWidget.methods.addWebGLKMLHeatmap=function(e,t,o,r,i){var n=this;if(LeafletWidget.utils.isURL(e))$.getJSON(e,(function(e){var s=toGeoJSON.kml(LeafletWidget.utils.parseXML(e));a(n,s,t,o,r,i)}));else{var s=toGeoJSON.kml(LeafletWidget.utils.parseXML(e));a(n,s,t,o,r,i)}},LeafletWidget.methods.addWebGLCSVHeatmap=function(e,t,o,r,i,n){var s=this;LeafletWidget.utils.isURL(e)?$.getJSON(e,(function(e){csv2geojson.csv2geojson(e,n||{},(function(e,n){a(s,n,t,o,r,i)}))})):csv2geojson.csv2geojson(e,n||{},(function(e,n){a(s,n,t,o,r,i)}))},LeafletWidget.methods.addWebGLGPXHeatmap=function(e,t,o,r,i){var n=this;if(LeafletWidget.utils.isURL(e))$.getJSON(e,(function(e){var s=toGeoJSON.gpx(LeafletWidget.utils.parseXML(e));a(n,s,t,o,r,i)}));else{var s=toGeoJSON.gpx(LeafletWidget.utils.parseXML(e));a(n,s,t,o,r,i)}},LeafletWidget.methods.removeWebGLHeatmap=function(e){this.layerManager.removeLayer("webGLHeatmap",e)},LeafletWidget.methods.clearWebGLHeatmap=function(){this.layerManager.clearLayers("webGLHeatmap")}})();
//# sourceMappingURL=lfx-webgl-heatmap-bindings.js.map