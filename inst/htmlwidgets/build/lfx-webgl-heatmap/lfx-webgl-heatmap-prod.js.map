{"version":3,"file":"lfx-webgl-heatmap-prod.js","mappings":"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","sources":["webpack://leaflet.extras/./node_modules/leaflet-webgl-heatmap/dist/leaflet-webgl-heatmap.min.js","webpack://leaflet.extras/./node_modules/webgl-heatmap/webgl-heatmap.js","webpack://leaflet.extras/webpack/startup"],"sourcesContent":["/*\n * MIT Copyright 2016 Ursudio <info@ursudio.com>\n * http://www.ursudio.com/\n * Please attribute Ursudio in any production associated with this JavaScript plugin.\n */\nL.WebGLHeatMap=L.Renderer.extend({version:\"0.2.7\",options:{size:3e4,units:\"m\",opacity:1,gradientTexture:!1,alphaRange:1,padding:0},_initContainer:function(){var t=this._container=L.DomUtil.create(\"canvas\",\"leaflet-zoom-animated\"),i=this.options;t.id=\"webgl-leaflet-\"+L.Util.stamp(this),t.style.opacity=i.opacity,t.style.position=\"absolute\";try{this.gl=window.createWebGLHeatmap({canvas:t,gradientTexture:i.gradientTexture,alphaRange:[0,i.alphaRange]})}catch(t){console.error(t),this.gl={clear:function(){},update:function(){},multiply:function(){},addPoint:function(){},display:function(){},adjustSize:function(){}}}this._container=t},onAdd:function(){this.size=this.options.size,L.Renderer.prototype.onAdd.call(this),this.resize()},_destroyContainer:function(){delete this.gl,L.DomUtil.remove(this._container),L.DomEvent.off(this._container),delete this._container},getEvents:function(){var t=L.Renderer.prototype.getEvents.call(this);return L.Util.extend(t,{resize:this.resize,move:L.Util.throttle(this._update,49,this)}),t},resize:function(){var t=this._container,i=this._map.getSize();t.width=i.x,t.height=i.y,this.gl.adjustSize(),this.draw()},reposition:function(){var t=this._map._getMapPanePos().multiplyBy(-1);L.DomUtil.setPosition(this._container,t)},_update:function(){L.Renderer.prototype._update.call(this),this.draw()},draw:function(){var t=this._map,i=this.gl,e=this.data,n=e.length,a=Math.floor,o=this[\"_scale\"+this.options.units].bind(this),s=this._multiply;if(t){if(i.clear(),this.reposition(),n){for(var r=0;r<n;r++){var l=e[r],h=L.latLng(l),d=t.latLngToContainerPoint(h);i.addPoint(a(d.x),a(d.y),o(h),l[2])}i.update(),s&&(i.multiply(s),i.update())}i.display()}},_scalem:function(t){var i=this._map,e=this.size/40075017*360/Math.cos(Math.PI/180*t.lat),n=new L.LatLng(t.lat,t.lng-e),a=i.latLngToLayerPoint(t),o=i.latLngToLayerPoint(n);return Math.max(Math.round(a.x-o.x),1)},_scalepx:function(){return this.size},data:[],addDataPoint:function(t,i,e){this.data.push([t,i,e/100])},setData:function(t){this.data=t,this._multiply=null,this.draw()},clear:function(){this.setData([])},multiply:function(t){this._multiply=t,this.draw()}}),L.webGLHeatmap=function(t){return new L.WebGLHeatMap(t)};","// Generated by CoffeeScript 1.8.0\r\n(function() {\r\n  var Framebuffer, Heights, Node, Shader, Texture, WebGLHeatmap, fragmentShaderBlit, nukeVendorPrefix, textureFloatShims, vertexShaderBlit,\r\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\r\n\r\n  nukeVendorPrefix = function() {\r\n    var getExtension, getSupportedExtensions, vendorRe, vendors;\r\n    if (window.WebGLRenderingContext != null) {\r\n      vendors = ['WEBKIT', 'MOZ', 'MS', 'O'];\r\n      vendorRe = /^WEBKIT_(.*)|MOZ_(.*)|MS_(.*)|O_(.*)/;\r\n      getExtension = WebGLRenderingContext.prototype.getExtension;\r\n      WebGLRenderingContext.prototype.getExtension = function(name) {\r\n        var extobj, match, vendor, _i, _len;\r\n        match = name.match(vendorRe);\r\n        if (match !== null) {\r\n          name = match[1];\r\n        }\r\n        extobj = getExtension.call(this, name);\r\n        if (extobj === null) {\r\n          for (_i = 0, _len = vendors.length; _i < _len; _i++) {\r\n            vendor = vendors[_i];\r\n            extobj = getExtension.call(this, vendor + '_' + name);\r\n            if (extobj !== null) {\r\n              return extobj;\r\n            }\r\n          }\r\n          return null;\r\n        } else {\r\n          return extobj;\r\n        }\r\n      };\r\n      getSupportedExtensions = WebGLRenderingContext.prototype.getSupportedExtensions;\r\n      return WebGLRenderingContext.prototype.getSupportedExtensions = function() {\r\n        var extension, match, result, supported, _i, _len;\r\n        supported = getSupportedExtensions.call(this);\r\n        result = [];\r\n        for (_i = 0, _len = supported.length; _i < _len; _i++) {\r\n          extension = supported[_i];\r\n          match = extension.match(vendorRe);\r\n          if (match !== null) {\r\n            extension = match[1];\r\n          }\r\n          if (__indexOf.call(result, extension) < 0) {\r\n            result.push(extension);\r\n          }\r\n        }\r\n        return result;\r\n      };\r\n    }\r\n  };\r\n\r\n  textureFloatShims = function() {\r\n    var checkColorBuffer, checkFloatLinear, checkSupport, checkTexture, createSourceCanvas, getExtension, getSupportedExtensions, name, shimExtensions, shimLookup, unshimExtensions, unshimLookup, _i, _len;\r\n    createSourceCanvas = function() {\r\n      var canvas, ctx, imageData;\r\n      canvas = document.createElement('canvas');\r\n      canvas.width = 2;\r\n      canvas.height = 2;\r\n      ctx = canvas.getContext('2d');\r\n      imageData = ctx.getImageData(0, 0, 2, 2);\r\n      imageData.data.set(new Uint8ClampedArray([0, 0, 0, 0, 255, 255, 255, 255, 0, 0, 0, 0, 255, 255, 255, 255]));\r\n      ctx.putImageData(imageData, 0, 0);\r\n      return canvas;\r\n    };\r\n    createSourceCanvas();\r\n    checkFloatLinear = function(gl, sourceType) {\r\n      var buffer, cleanup, fragmentShader, framebuffer, positionLoc, program, readBuffer, result, source, sourceCanvas, sourceLoc, target, vertexShader, vertices;\r\n      program = gl.createProgram();\r\n      vertexShader = gl.createShader(gl.VERTEX_SHADER);\r\n      gl.attachShader(program, vertexShader);\r\n      gl.shaderSource(vertexShader, 'attribute vec2 position;\\nvoid main(){\\n    gl_Position = vec4(position, 0.0, 1.0);\\n}');\r\n      gl.compileShader(vertexShader);\r\n      if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\r\n        throw gl.getShaderInfoLog(vertexShader);\r\n      }\r\n      fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n      gl.attachShader(program, fragmentShader);\r\n      gl.shaderSource(fragmentShader, 'uniform sampler2D source;\\nvoid main(){\\n    gl_FragColor = texture2D(source, vec2(1.0, 1.0));\\n}');\r\n      gl.compileShader(fragmentShader);\r\n      if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\r\n        throw gl.getShaderInfoLog(fragmentShader);\r\n      }\r\n      gl.linkProgram(program);\r\n      if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n        throw gl.getProgramInfoLog(program);\r\n      }\r\n      gl.useProgram(program);\r\n      cleanup = function() {\r\n        gl.deleteShader(fragmentShader);\r\n        gl.deleteShader(vertexShader);\r\n        gl.deleteProgram(program);\r\n        gl.deleteBuffer(buffer);\r\n        gl.deleteTexture(source);\r\n        gl.deleteTexture(target);\r\n        gl.deleteFramebuffer(framebuffer);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n        gl.useProgram(null);\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n        return gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n      };\r\n      target = gl.createTexture();\r\n      gl.bindTexture(gl.TEXTURE_2D, target);\r\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n      framebuffer = gl.createFramebuffer();\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\r\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, target, 0);\r\n      sourceCanvas = createSourceCanvas();\r\n      source = gl.createTexture();\r\n      gl.bindTexture(gl.TEXTURE_2D, source);\r\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, sourceType, sourceCanvas);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n      vertices = new Float32Array([1, 1, -1, 1, -1, -1, 1, 1, -1, -1, 1, -1]);\r\n      buffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\r\n      positionLoc = gl.getAttribLocation(program, 'position');\r\n      sourceLoc = gl.getUniformLocation(program, 'source');\r\n      gl.enableVertexAttribArray(positionLoc);\r\n      gl.vertexAttribPointer(positionLoc, 2, gl.FLOAT, false, 0, 0);\r\n      gl.uniform1i(sourceLoc, 0);\r\n      gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n      readBuffer = new Uint8Array(4 * 4);\r\n      gl.readPixels(0, 0, 2, 2, gl.RGBA, gl.UNSIGNED_BYTE, readBuffer);\r\n      result = Math.abs(readBuffer[0] - 127) < 10;\r\n      cleanup();\r\n      return result;\r\n    };\r\n    checkTexture = function(gl, targetType) {\r\n      var target;\r\n      target = gl.createTexture();\r\n      gl.bindTexture(gl.TEXTURE_2D, target);\r\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, targetType, null);\r\n      if (gl.getError() === 0) {\r\n        gl.deleteTexture(target);\r\n        return true;\r\n      } else {\r\n        gl.deleteTexture(target);\r\n        return false;\r\n      }\r\n    };\r\n    checkColorBuffer = function(gl, targetType) {\r\n      var check, framebuffer, target;\r\n      target = gl.createTexture();\r\n      gl.bindTexture(gl.TEXTURE_2D, target);\r\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, targetType, null);\r\n      framebuffer = gl.createFramebuffer();\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\r\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, target, 0);\r\n      check = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\r\n      gl.deleteTexture(target);\r\n      gl.deleteFramebuffer(framebuffer);\r\n      gl.bindTexture(gl.TEXTURE_2D, null);\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n      if (check === gl.FRAMEBUFFER_COMPLETE) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    };\r\n    shimExtensions = [];\r\n    shimLookup = {};\r\n    unshimExtensions = [];\r\n    checkSupport = function() {\r\n      var canvas, extobj, gl, halfFloatExt, halfFloatTexturing, singleFloatExt, singleFloatTexturing;\r\n      canvas = document.createElement('canvas');\r\n      gl = null;\r\n      try {\r\n        gl = canvas.getContext('experimental-webgl');\r\n        if (gl === null) {\r\n          gl = canvas.getContext('webgl');\r\n        }\r\n      } catch (_error) {}\r\n      if (gl != null) {\r\n        singleFloatExt = gl.getExtension('OES_texture_float');\r\n        if (singleFloatExt === null) {\r\n          if (checkTexture(gl, gl.FLOAT)) {\r\n            singleFloatTexturing = true;\r\n            shimExtensions.push('OES_texture_float');\r\n            shimLookup.OES_texture_float = {\r\n              shim: true\r\n            };\r\n          } else {\r\n            singleFloatTexturing = false;\r\n            unshimExtensions.push('OES_texture_float');\r\n          }\r\n        } else {\r\n          if (checkTexture(gl, gl.FLOAT)) {\r\n            singleFloatTexturing = true;\r\n            shimExtensions.push('OES_texture_float');\r\n          } else {\r\n            singleFloatTexturing = false;\r\n            unshimExtensions.push('OES_texture_float');\r\n          }\r\n        }\r\n        if (singleFloatTexturing) {\r\n          extobj = gl.getExtension('WEBGL_color_buffer_float');\r\n          if (extobj === null) {\r\n            if (checkColorBuffer(gl, gl.FLOAT)) {\r\n              shimExtensions.push('WEBGL_color_buffer_float');\r\n              shimLookup.WEBGL_color_buffer_float = {\r\n                shim: true,\r\n                RGBA32F_EXT: 0x8814,\r\n                RGB32F_EXT: 0x8815,\r\n                FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT: 0x8211,\r\n                UNSIGNED_NORMALIZED_EXT: 0x8C17\r\n              };\r\n            } else {\r\n              unshimExtensions.push('WEBGL_color_buffer_float');\r\n            }\r\n          } else {\r\n            if (checkColorBuffer(gl, gl.FLOAT)) {\r\n              shimExtensions.push('WEBGL_color_buffer_float');\r\n            } else {\r\n              unshimExtensions.push('WEBGL_color_buffer_float');\r\n            }\r\n          }\r\n          extobj = gl.getExtension('OES_texture_float_linear');\r\n          if (extobj === null) {\r\n            if (checkFloatLinear(gl, gl.FLOAT)) {\r\n              shimExtensions.push('OES_texture_float_linear');\r\n              shimLookup.OES_texture_float_linear = {\r\n                shim: true\r\n              };\r\n            } else {\r\n              unshimExtensions.push('OES_texture_float_linear');\r\n            }\r\n          } else {\r\n            if (checkFloatLinear(gl, gl.FLOAT)) {\r\n              shimExtensions.push('OES_texture_float_linear');\r\n            } else {\r\n              unshimExtensions.push('OES_texture_float_linear');\r\n            }\r\n          }\r\n        }\r\n        halfFloatExt = gl.getExtension('OES_texture_half_float');\r\n        if (halfFloatExt === null) {\r\n          if (checkTexture(gl, 0x8D61)) {\r\n            halfFloatTexturing = true;\r\n            shimExtensions.push('OES_texture_half_float');\r\n            halfFloatExt = shimLookup.OES_texture_half_float = {\r\n              HALF_FLOAT_OES: 0x8D61,\r\n              shim: true\r\n            };\r\n          } else {\r\n            halfFloatTexturing = false;\r\n            unshimExtensions.push('OES_texture_half_float');\r\n          }\r\n        } else {\r\n          if (checkTexture(gl, halfFloatExt.HALF_FLOAT_OES)) {\r\n            halfFloatTexturing = true;\r\n            shimExtensions.push('OES_texture_half_float');\r\n          } else {\r\n            halfFloatTexturing = false;\r\n            unshimExtensions.push('OES_texture_half_float');\r\n          }\r\n        }\r\n        if (halfFloatTexturing) {\r\n          extobj = gl.getExtension('EXT_color_buffer_half_float');\r\n          if (extobj === null) {\r\n            if (checkColorBuffer(gl, halfFloatExt.HALF_FLOAT_OES)) {\r\n              shimExtensions.push('EXT_color_buffer_half_float');\r\n              shimLookup.EXT_color_buffer_half_float = {\r\n                shim: true,\r\n                RGBA16F_EXT: 0x881A,\r\n                RGB16F_EXT: 0x881B,\r\n                FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT: 0x8211,\r\n                UNSIGNED_NORMALIZED_EXT: 0x8C17\r\n              };\r\n            } else {\r\n              unshimExtensions.push('EXT_color_buffer_half_float');\r\n            }\r\n          } else {\r\n            if (checkColorBuffer(gl, halfFloatExt.HALF_FLOAT_OES)) {\r\n              shimExtensions.push('EXT_color_buffer_half_float');\r\n            } else {\r\n              unshimExtensions.push('EXT_color_buffer_half_float');\r\n            }\r\n          }\r\n          extobj = gl.getExtension('OES_texture_half_float_linear');\r\n          if (extobj === null) {\r\n            if (checkFloatLinear(gl, halfFloatExt.HALF_FLOAT_OES)) {\r\n              shimExtensions.push('OES_texture_half_float_linear');\r\n              return shimLookup.OES_texture_half_float_linear = {\r\n                shim: true\r\n              };\r\n            } else {\r\n              return unshimExtensions.push('OES_texture_half_float_linear');\r\n            }\r\n          } else {\r\n            if (checkFloatLinear(gl, halfFloatExt.HALF_FLOAT_OES)) {\r\n              return shimExtensions.push('OES_texture_half_float_linear');\r\n            } else {\r\n              return unshimExtensions.push('OES_texture_half_float_linear');\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n    if (window.WebGLRenderingContext != null) {\r\n      checkSupport();\r\n      unshimLookup = {};\r\n      for (_i = 0, _len = unshimExtensions.length; _i < _len; _i++) {\r\n        name = unshimExtensions[_i];\r\n        unshimLookup[name] = true;\r\n      }\r\n      getExtension = WebGLRenderingContext.prototype.getExtension;\r\n      WebGLRenderingContext.prototype.getExtension = function(name) {\r\n        var extobj;\r\n        extobj = shimLookup[name];\r\n        if (extobj === void 0) {\r\n          if (unshimLookup[name]) {\r\n            return null;\r\n          } else {\r\n            return getExtension.call(this, name);\r\n          }\r\n        } else {\r\n          return extobj;\r\n        }\r\n      };\r\n      getSupportedExtensions = WebGLRenderingContext.prototype.getSupportedExtensions;\r\n      WebGLRenderingContext.prototype.getSupportedExtensions = function() {\r\n        var extension, result, supported, _j, _k, _len1, _len2;\r\n        supported = getSupportedExtensions.call(this);\r\n        result = [];\r\n        for (_j = 0, _len1 = supported.length; _j < _len1; _j++) {\r\n          extension = supported[_j];\r\n          if (unshimLookup[extension] === void 0) {\r\n            result.push(extension);\r\n          }\r\n        }\r\n        for (_k = 0, _len2 = shimExtensions.length; _k < _len2; _k++) {\r\n          extension = shimExtensions[_k];\r\n          if (__indexOf.call(result, extension) < 0) {\r\n            result.push(extension);\r\n          }\r\n        }\r\n        return result;\r\n      };\r\n      return WebGLRenderingContext.prototype.getFloatExtension = function(spec) {\r\n        var candidate, candidates, half, halfFramebuffer, halfLinear, halfTexture, i, importance, preference, result, single, singleFramebuffer, singleLinear, singleTexture, use, _j, _k, _l, _len1, _len2, _len3, _len4, _m, _ref, _ref1, _ref2;\r\n        if (spec.prefer == null) {\r\n          spec.prefer = ['half'];\r\n        }\r\n        if (spec.require == null) {\r\n          spec.require = [];\r\n        }\r\n        if (spec.throws == null) {\r\n          spec.throws = true;\r\n        }\r\n        singleTexture = this.getExtension('OES_texture_float');\r\n        halfTexture = this.getExtension('OES_texture_half_float');\r\n        singleFramebuffer = this.getExtension('WEBGL_color_buffer_float');\r\n        halfFramebuffer = this.getExtension('EXT_color_buffer_half_float');\r\n        singleLinear = this.getExtension('OES_texture_float_linear');\r\n        halfLinear = this.getExtension('OES_texture_half_float_linear');\r\n        single = {\r\n          texture: singleTexture !== null,\r\n          filterable: singleLinear !== null,\r\n          renderable: singleFramebuffer !== null,\r\n          score: 0,\r\n          precision: 'single',\r\n          half: false,\r\n          single: true,\r\n          type: this.FLOAT\r\n        };\r\n        half = {\r\n          texture: halfTexture !== null,\r\n          filterable: halfLinear !== null,\r\n          renderable: halfFramebuffer !== null,\r\n          score: 0,\r\n          precision: 'half',\r\n          half: true,\r\n          single: false,\r\n          type: (_ref = halfTexture != null ? halfTexture.HALF_FLOAT_OES : void 0) != null ? _ref : null\r\n        };\r\n        candidates = [];\r\n        if (single.texture) {\r\n          candidates.push(single);\r\n        }\r\n        if (half.texture) {\r\n          candidates.push(half);\r\n        }\r\n        result = [];\r\n        for (_j = 0, _len1 = candidates.length; _j < _len1; _j++) {\r\n          candidate = candidates[_j];\r\n          use = true;\r\n          _ref1 = spec.require;\r\n          for (_k = 0, _len2 = _ref1.length; _k < _len2; _k++) {\r\n            name = _ref1[_k];\r\n            if (candidate[name] === false) {\r\n              use = false;\r\n            }\r\n          }\r\n          if (use) {\r\n            result.push(candidate);\r\n          }\r\n        }\r\n        for (_l = 0, _len3 = result.length; _l < _len3; _l++) {\r\n          candidate = result[_l];\r\n          _ref2 = spec.prefer;\r\n          for (i = _m = 0, _len4 = _ref2.length; _m < _len4; i = ++_m) {\r\n            preference = _ref2[i];\r\n            importance = Math.pow(2, spec.prefer.length - i - 1);\r\n            if (candidate[preference]) {\r\n              candidate.score += importance;\r\n            }\r\n          }\r\n        }\r\n        result.sort(function(a, b) {\r\n          if (a.score === b.score) {\r\n            return 0;\r\n          } else if (a.score < b.score) {\r\n            return 1;\r\n          } else if (a.score > b.score) {\r\n            return -1;\r\n          }\r\n        });\r\n        if (result.length === 0) {\r\n          if (spec.throws) {\r\n            throw 'No floating point texture support that is ' + spec.require.join(', ');\r\n          } else {\r\n            return null;\r\n          }\r\n        } else {\r\n          result = result[0];\r\n          return {\r\n            filterable: result.filterable,\r\n            renderable: result.renderable,\r\n            type: result.type,\r\n            precision: result.precision\r\n          };\r\n        }\r\n      };\r\n    }\r\n  };\r\n\r\n  nukeVendorPrefix();\r\n\r\n  textureFloatShims();\r\n\r\n  Shader = (function() {\r\n    function Shader(gl, _arg) {\r\n      var fragment, vertex;\r\n      this.gl = gl;\r\n      vertex = _arg.vertex, fragment = _arg.fragment;\r\n      this.program = this.gl.createProgram();\r\n      this.vs = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n      this.fs = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n      this.gl.attachShader(this.program, this.vs);\r\n      this.gl.attachShader(this.program, this.fs);\r\n      this.compileShader(this.vs, vertex);\r\n      this.compileShader(this.fs, fragment);\r\n      this.link();\r\n      this.value_cache = {};\r\n      this.uniform_cache = {};\r\n      this.attribCache = {};\r\n    }\r\n\r\n    Shader.prototype.attribLocation = function(name) {\r\n      var location;\r\n      location = this.attribCache[name];\r\n      if (location === void 0) {\r\n        location = this.attribCache[name] = this.gl.getAttribLocation(this.program, name);\r\n      }\r\n      return location;\r\n    };\r\n\r\n    Shader.prototype.compileShader = function(shader, source) {\r\n      this.gl.shaderSource(shader, source);\r\n      this.gl.compileShader(shader);\r\n      if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\r\n        throw \"Shader Compile Error: \" + (this.gl.getShaderInfoLog(shader));\r\n      }\r\n    };\r\n\r\n    Shader.prototype.link = function() {\r\n      this.gl.linkProgram(this.program);\r\n      if (!this.gl.getProgramParameter(this.program, this.gl.LINK_STATUS)) {\r\n        throw \"Shader Link Error: \" + (this.gl.getProgramInfoLog(this.program));\r\n      }\r\n    };\r\n\r\n    Shader.prototype.use = function() {\r\n      this.gl.useProgram(this.program);\r\n      return this;\r\n    };\r\n\r\n    Shader.prototype.uniformLoc = function(name) {\r\n      var location;\r\n      location = this.uniform_cache[name];\r\n      if (location === void 0) {\r\n        location = this.uniform_cache[name] = this.gl.getUniformLocation(this.program, name);\r\n      }\r\n      return location;\r\n    };\r\n\r\n    Shader.prototype.int = function(name, value) {\r\n      var cached, loc;\r\n      cached = this.value_cache[name];\r\n      if (cached !== value) {\r\n        this.value_cache[name] = value;\r\n        loc = this.uniformLoc(name);\r\n        if (loc) {\r\n          this.gl.uniform1i(loc, value);\r\n        }\r\n      }\r\n      return this;\r\n    };\r\n\r\n    Shader.prototype.vec2 = function(name, a, b) {\r\n      var loc;\r\n      loc = this.uniformLoc(name);\r\n      if (loc) {\r\n        this.gl.uniform2f(loc, a, b);\r\n      }\r\n      return this;\r\n    };\r\n\r\n    Shader.prototype.float = function(name, value) {\r\n      var cached, loc;\r\n      cached = this.value_cache[name];\r\n      if (cached !== value) {\r\n        this.value_cache[name] = value;\r\n        loc = this.uniformLoc(name);\r\n        if (loc) {\r\n          this.gl.uniform1f(loc, value);\r\n        }\r\n      }\r\n      return this;\r\n    };\r\n\r\n    return Shader;\r\n\r\n  })();\r\n\r\n  Framebuffer = (function() {\r\n    function Framebuffer(gl) {\r\n      this.gl = gl;\r\n      this.buffer = this.gl.createFramebuffer();\r\n    }\r\n\r\n    Framebuffer.prototype.destroy = function() {\r\n      return this.gl.deleteFRamebuffer(this.buffer);\r\n    };\r\n\r\n    Framebuffer.prototype.bind = function() {\r\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.buffer);\r\n      return this;\r\n    };\r\n\r\n    Framebuffer.prototype.unbind = function() {\r\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null);\r\n      return this;\r\n    };\r\n\r\n    Framebuffer.prototype.check = function() {\r\n      var result;\r\n      result = this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);\r\n      switch (result) {\r\n        case this.gl.FRAMEBUFFER_UNSUPPORTED:\r\n          throw 'Framebuffer is unsupported';\r\n          break;\r\n        case this.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\r\n          throw 'Framebuffer incomplete attachment';\r\n          break;\r\n        case this.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\r\n          throw 'Framebuffer incomplete dimensions';\r\n          break;\r\n        case this.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\r\n          throw 'Framebuffer incomplete missing attachment';\r\n      }\r\n      return this;\r\n    };\r\n\r\n    Framebuffer.prototype.color = function(texture) {\r\n      this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, texture.target, texture.handle, 0);\r\n      this.check();\r\n      return this;\r\n    };\r\n\r\n    Framebuffer.prototype.depth = function(buffer) {\r\n      this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER, this.gl.DEPTH_ATTACHMENT, this.gl.RENDERBUFFER, buffer.id);\r\n      this.check();\r\n      return this;\r\n    };\r\n\r\n    Framebuffer.prototype.destroy = function() {\r\n      return this.gl.deleteFramebuffer(this.buffer);\r\n    };\r\n\r\n    return Framebuffer;\r\n\r\n  })();\r\n\r\n  Texture = (function() {\r\n    function Texture(gl, params) {\r\n      var _ref, _ref1;\r\n      this.gl = gl;\r\n      if (params == null) {\r\n        params = {};\r\n      }\r\n      this.channels = this.gl[((_ref = params.channels) != null ? _ref : 'rgba').toUpperCase()];\r\n      if (typeof params.type === 'number') {\r\n        this.type = params.type;\r\n      } else {\r\n        this.type = this.gl[((_ref1 = params.type) != null ? _ref1 : 'unsigned_byte').toUpperCase()];\r\n      }\r\n      switch (this.channels) {\r\n        case this.gl.RGBA:\r\n          this.chancount = 4;\r\n          break;\r\n        case this.gl.RGB:\r\n          this.chancount = 3;\r\n          break;\r\n        case this.gl.LUMINANCE_ALPHA:\r\n          this.chancount = 2;\r\n          break;\r\n        default:\r\n          this.chancount = 1;\r\n      }\r\n      this.target = this.gl.TEXTURE_2D;\r\n      this.handle = this.gl.createTexture();\r\n    }\r\n\r\n    Texture.prototype.destroy = function() {\r\n      return this.gl.deleteTexture(this.handle);\r\n    };\r\n\r\n    Texture.prototype.bind = function(unit) {\r\n      if (unit == null) {\r\n        unit = 0;\r\n      }\r\n      if (unit > 15) {\r\n        throw 'Texture unit too large: ' + unit;\r\n      }\r\n      this.gl.activeTexture(this.gl.TEXTURE0 + unit);\r\n      this.gl.bindTexture(this.target, this.handle);\r\n      return this;\r\n    };\r\n\r\n    Texture.prototype.setSize = function(width, height) {\r\n      this.width = width;\r\n      this.height = height;\r\n      this.gl.texImage2D(this.target, 0, this.channels, this.width, this.height, 0, this.channels, this.type, null);\r\n      return this;\r\n    };\r\n\r\n    Texture.prototype.upload = function(data) {\r\n      this.width = data.width;\r\n      this.height = data.height;\r\n      this.gl.texImage2D(this.target, 0, this.channels, this.channels, this.type, data);\r\n      return this;\r\n    };\r\n\r\n    Texture.prototype.linear = function() {\r\n      this.gl.texParameteri(this.target, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\r\n      this.gl.texParameteri(this.target, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\r\n      return this;\r\n    };\r\n\r\n    Texture.prototype.nearest = function() {\r\n      this.gl.texParameteri(this.target, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);\r\n      this.gl.texParameteri(this.target, this.gl.TEXTURE_MIN_FILTER, this.gl.NEAREST);\r\n      return this;\r\n    };\r\n\r\n    Texture.prototype.clampToEdge = function() {\r\n      this.gl.texParameteri(this.target, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\r\n      this.gl.texParameteri(this.target, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\r\n      return this;\r\n    };\r\n\r\n    Texture.prototype.repeat = function() {\r\n      this.gl.texParameteri(this.target, this.gl.TEXTURE_WRAP_S, this.gl.REPEAT);\r\n      this.gl.texParameteri(this.target, this.gl.TEXTURE_WRAP_T, this.gl.REPEAT);\r\n      return this;\r\n    };\r\n\r\n    return Texture;\r\n\r\n  })();\r\n\r\n  Node = (function() {\r\n    function Node(gl, width, height) {\r\n      var floatExt;\r\n      this.gl = gl;\r\n      this.width = width;\r\n      this.height = height;\r\n      floatExt = this.gl.getFloatExtension({\r\n        require: ['renderable']\r\n      });\r\n      this.texture = new Texture(this.gl, {\r\n        type: floatExt.type\r\n      }).bind(0).setSize(this.width, this.height).nearest().clampToEdge();\r\n      this.fbo = new Framebuffer(this.gl).bind().color(this.texture).unbind();\r\n    }\r\n\r\n    Node.prototype.use = function() {\r\n      return this.fbo.bind();\r\n    };\r\n\r\n    Node.prototype.bind = function(unit) {\r\n      return this.texture.bind(unit);\r\n    };\r\n\r\n    Node.prototype.end = function() {\r\n      return this.fbo.unbind();\r\n    };\r\n\r\n    Node.prototype.resize = function(width, height) {\r\n      this.width = width;\r\n      this.height = height;\r\n      return this.texture.bind(0).setSize(this.width, this.height);\r\n    };\r\n\r\n    return Node;\r\n\r\n  })();\r\n\r\n  vertexShaderBlit = 'attribute vec4 position;\\nvarying vec2 texcoord;\\nvoid main(){\\n    texcoord = position.xy*0.5+0.5;\\n    gl_Position = position;\\n}';\r\n\r\n  fragmentShaderBlit = '#ifdef GL_FRAGMENT_PRECISION_HIGH\\n    precision highp int;\\n    precision highp float;\\n#else\\n    precision mediump int;\\n    precision mediump float;\\n#endif\\nuniform sampler2D source;\\nvarying vec2 texcoord;';\r\n\r\n  Heights = (function() {\r\n    function Heights(heatmap, gl, width, height) {\r\n      var i, _i, _ref;\r\n      this.heatmap = heatmap;\r\n      this.gl = gl;\r\n      this.width = width;\r\n      this.height = height;\r\n      this.shader = new Shader(this.gl, {\r\n        vertex: 'attribute vec4 position, intensity;\\nvarying vec2 off, dim;\\nvarying float vIntensity;\\nuniform vec2 viewport;\\n\\nvoid main(){\\n    dim = abs(position.zw);\\n    off = position.zw;\\n    vec2 pos = position.xy + position.zw;\\n    vIntensity = intensity.x;\\n    gl_Position = vec4((pos/viewport)*2.0-1.0, 0.0, 1.0);\\n}',\r\n        fragment: '#ifdef GL_FRAGMENT_PRECISION_HIGH\\n    precision highp int;\\n    precision highp float;\\n#else\\n    precision mediump int;\\n    precision mediump float;\\n#endif\\nvarying vec2 off, dim;\\nvarying float vIntensity;\\nvoid main(){\\n    float falloff = (1.0 - smoothstep(0.0, 1.0, length(off/dim)));\\n    float intensity = falloff*vIntensity;\\n    gl_FragColor = vec4(intensity);\\n}'\r\n      });\r\n      this.clampShader = new Shader(this.gl, {\r\n        vertex: vertexShaderBlit,\r\n        fragment: fragmentShaderBlit + 'uniform float low, high;\\nvoid main(){\\n    gl_FragColor = vec4(clamp(texture2D(source, texcoord).rgb, low, high), 1.0);\\n}'\r\n      });\r\n      this.multiplyShader = new Shader(this.gl, {\r\n        vertex: vertexShaderBlit,\r\n        fragment: fragmentShaderBlit + 'uniform float value;\\nvoid main(){\\n    gl_FragColor = vec4(texture2D(source, texcoord).rgb*value, 1.0);\\n}'\r\n      });\r\n      this.blurShader = new Shader(this.gl, {\r\n        vertex: vertexShaderBlit,\r\n        fragment: fragmentShaderBlit + 'uniform vec2 viewport;\\nvoid main(){\\n    vec4 result = vec4(0.0);\\n    for(int x=-1; x<=1; x++){\\n        for(int y=-1; y<=1; y++){\\n            vec2 off = vec2(x,y)/viewport;\\n            //float factor = 1.0 - smoothstep(0.0, 1.5, length(off));\\n            float factor = 1.0;\\n            result += vec4(texture2D(source, texcoord+off).rgb*factor, factor);\\n        }\\n    }\\n    gl_FragColor = vec4(result.rgb/result.w, 1.0);\\n}'\r\n      });\r\n      this.nodeBack = new Node(this.gl, this.width, this.height);\r\n      this.nodeFront = new Node(this.gl, this.width, this.height);\r\n      this.vertexBuffer = this.gl.createBuffer();\r\n      this.vertexSize = 8;\r\n      this.maxPointCount = 1024 * 10;\r\n      this.vertexBufferData = new Float32Array(this.maxPointCount * this.vertexSize * 6);\r\n      this.vertexBufferViews = [];\r\n      for (i = _i = 0, _ref = this.maxPointCount; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\r\n        this.vertexBufferViews.push(new Float32Array(this.vertexBufferData.buffer, 0, i * this.vertexSize * 6));\r\n      }\r\n      this.bufferIndex = 0;\r\n      this.pointCount = 0;\r\n    }\r\n\r\n    Heights.prototype.resize = function(width, height) {\r\n      this.width = width;\r\n      this.height = height;\r\n      this.nodeBack.resize(this.width, this.height);\r\n      return this.nodeFront.resize(this.width, this.height);\r\n    };\r\n\r\n    Heights.prototype.update = function() {\r\n      var intensityLoc, positionLoc;\r\n      if (this.pointCount > 0) {\r\n        this.gl.enable(this.gl.BLEND);\r\n        this.nodeFront.use();\r\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, this.vertexBufferViews[this.pointCount], this.gl.STREAM_DRAW);\r\n        positionLoc = this.shader.attribLocation('position');\r\n        intensityLoc = this.shader.attribLocation('intensity');\r\n        this.gl.enableVertexAttribArray(1);\r\n        this.gl.vertexAttribPointer(positionLoc, 4, this.gl.FLOAT, false, 8 * 4, 0 * 4);\r\n        this.gl.vertexAttribPointer(intensityLoc, 4, this.gl.FLOAT, false, 8 * 4, 4 * 4);\r\n        this.shader.use().vec2('viewport', this.width, this.height);\r\n        this.gl.drawArrays(this.gl.TRIANGLES, 0, this.pointCount * 6);\r\n        this.gl.disableVertexAttribArray(1);\r\n        this.pointCount = 0;\r\n        this.bufferIndex = 0;\r\n        this.nodeFront.end();\r\n        return this.gl.disable(this.gl.BLEND);\r\n      }\r\n    };\r\n\r\n    Heights.prototype.clear = function() {\r\n      this.nodeFront.use();\r\n      this.gl.clearColor(0, 0, 0, 1);\r\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n      return this.nodeFront.end();\r\n    };\r\n\r\n    Heights.prototype.clamp = function(min, max) {\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.heatmap.quad);\r\n      this.gl.vertexAttribPointer(0, 4, this.gl.FLOAT, false, 0, 0);\r\n      this.nodeFront.bind(0);\r\n      this.nodeBack.use();\r\n      this.clampShader.use().int('source', 0).float('low', min).float('high', max);\r\n      this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n      this.nodeBack.end();\r\n      return this.swap();\r\n    };\r\n\r\n    Heights.prototype.multiply = function(value) {\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.heatmap.quad);\r\n      this.gl.vertexAttribPointer(0, 4, this.gl.FLOAT, false, 0, 0);\r\n      this.nodeFront.bind(0);\r\n      this.nodeBack.use();\r\n      this.multiplyShader.use().int('source', 0).float('value', value);\r\n      this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n      this.nodeBack.end();\r\n      return this.swap();\r\n    };\r\n\r\n    Heights.prototype.blur = function() {\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.heatmap.quad);\r\n      this.gl.vertexAttribPointer(0, 4, this.gl.FLOAT, false, 0, 0);\r\n      this.nodeFront.bind(0);\r\n      this.nodeBack.use();\r\n      this.blurShader.use().int('source', 0).vec2('viewport', this.width, this.height);\r\n      this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n      this.nodeBack.end();\r\n      return this.swap();\r\n    };\r\n\r\n    Heights.prototype.swap = function() {\r\n      var tmp;\r\n      tmp = this.nodeFront;\r\n      this.nodeFront = this.nodeBack;\r\n      return this.nodeBack = tmp;\r\n    };\r\n\r\n    Heights.prototype.addVertex = function(x, y, xs, ys, intensity) {\r\n      this.vertexBufferData[this.bufferIndex++] = x;\r\n      this.vertexBufferData[this.bufferIndex++] = y;\r\n      this.vertexBufferData[this.bufferIndex++] = xs;\r\n      this.vertexBufferData[this.bufferIndex++] = ys;\r\n      this.vertexBufferData[this.bufferIndex++] = intensity;\r\n      this.vertexBufferData[this.bufferIndex++] = intensity;\r\n      this.vertexBufferData[this.bufferIndex++] = intensity;\r\n      return this.vertexBufferData[this.bufferIndex++] = intensity;\r\n    };\r\n\r\n    Heights.prototype.addPoint = function(x, y, size, intensity) {\r\n      var s;\r\n      if (size == null) {\r\n        size = 50;\r\n      }\r\n      if (intensity == null) {\r\n        intensity = 0.2;\r\n      }\r\n      if (this.pointCount >= this.maxPointCount - 1) {\r\n        this.update();\r\n      }\r\n      y = this.height - y;\r\n      s = size / 2;\r\n      this.addVertex(x, y, -s, -s, intensity);\r\n      this.addVertex(x, y, +s, -s, intensity);\r\n      this.addVertex(x, y, -s, +s, intensity);\r\n      this.addVertex(x, y, -s, +s, intensity);\r\n      this.addVertex(x, y, +s, -s, intensity);\r\n      this.addVertex(x, y, +s, +s, intensity);\r\n      return this.pointCount += 1;\r\n    };\r\n\r\n    return Heights;\r\n\r\n  })();\r\n\r\n  WebGLHeatmap = (function() {\r\n    function WebGLHeatmap(_arg) {\r\n      var alphaEnd, alphaRange, alphaStart, error, getColorFun, gradientTexture, image, intensityToAlpha, output, quad, textureGradient, _ref, _ref1;\r\n      _ref = _arg != null ? _arg : {}, this.canvas = _ref.canvas, this.width = _ref.width, this.height = _ref.height, intensityToAlpha = _ref.intensityToAlpha, gradientTexture = _ref.gradientTexture, alphaRange = _ref.alphaRange;\r\n      if (!this.canvas) {\r\n        this.canvas = document.createElement('canvas');\r\n      }\r\n      try {\r\n        this.gl = this.canvas.getContext('experimental-webgl', {\r\n          depth: false,\r\n          antialias: false\r\n        });\r\n        if (this.gl === null) {\r\n          this.gl = this.canvas.getContext('webgl', {\r\n            depth: false,\r\n            antialias: false\r\n          });\r\n          if (this.gl === null) {\r\n            throw 'WebGL not supported';\r\n          }\r\n        }\r\n      } catch (_error) {\r\n        error = _error;\r\n        throw 'WebGL not supported';\r\n      }\r\n      if (window.WebGLDebugUtils != null) {\r\n        console.log('debugging mode');\r\n        this.gl = WebGLDebugUtils.makeDebugContext(this.gl, function(err, funcName, args) {\r\n          throw WebGLDebugUtils.glEnumToString(err) + \" was caused by call to: \" + funcName;\r\n        });\r\n      }\r\n      this.gl.enableVertexAttribArray(0);\r\n      this.gl.blendFunc(this.gl.ONE, this.gl.ONE);\r\n      if (gradientTexture) {\r\n        textureGradient = this.gradientTexture = new Texture(this.gl, {\r\n          channels: 'rgba'\r\n        }).bind(0).setSize(2, 2).nearest().clampToEdge();\r\n        if (typeof gradientTexture === 'string') {\r\n          image = new Image();\r\n          image.onload = function() {\r\n            return textureGradient.bind().upload(image);\r\n          };\r\n          image.src = gradientTexture;\r\n        } else {\r\n          if (gradientTexture.width > 0 && gradientTexture.height > 0) {\r\n            textureGradient.upload(gradientTexture);\r\n          } else {\r\n            gradientTexture.onload = function() {\r\n              return textureGradient.upload(gradientTexture);\r\n            };\r\n          }\r\n        }\r\n        getColorFun = 'uniform sampler2D gradientTexture;\\nvec3 getColor(float intensity){\\n    return texture2D(gradientTexture, vec2(intensity, 0.0)).rgb;\\n}';\r\n      } else {\r\n        textureGradient = null;\r\n        getColorFun = 'vec3 getColor(float intensity){\\n    vec3 blue = vec3(0.0, 0.0, 1.0);\\n    vec3 cyan = vec3(0.0, 1.0, 1.0);\\n    vec3 green = vec3(0.0, 1.0, 0.0);\\n    vec3 yellow = vec3(1.0, 1.0, 0.0);\\n    vec3 red = vec3(1.0, 0.0, 0.0);\\n\\n    vec3 color = (\\n        fade(-0.25, 0.25, intensity)*blue +\\n        fade(0.0, 0.5, intensity)*cyan +\\n        fade(0.25, 0.75, intensity)*green +\\n        fade(0.5, 1.0, intensity)*yellow +\\n        smoothstep(0.75, 1.0, intensity)*red\\n    );\\n    return color;\\n}';\r\n      }\r\n      if (intensityToAlpha == null) {\r\n        intensityToAlpha = true;\r\n      }\r\n      if (intensityToAlpha) {\r\n        _ref1 = alphaRange != null ? alphaRange : [0, 1], alphaStart = _ref1[0], alphaEnd = _ref1[1];\r\n        output = \"vec4 alphaFun(vec3 color, float intensity){\\n    float alpha = smoothstep(\" + (alphaStart.toFixed(8)) + \", \" + (alphaEnd.toFixed(8)) + \", intensity);\\n    return vec4(color*alpha, alpha);\\n}\";\r\n      } else {\r\n        output = 'vec4 alphaFun(vec3 color, float intensity){\\n    return vec4(color, 1.0);\\n}';\r\n      }\r\n      this.shader = new Shader(this.gl, {\r\n        vertex: vertexShaderBlit,\r\n        fragment: fragmentShaderBlit + (\"float linstep(float low, float high, float value){\\n    return clamp((value-low)/(high-low), 0.0, 1.0);\\n}\\n\\nfloat fade(float low, float high, float value){\\n    float mid = (low+high)*0.5;\\n    float range = (high-low)*0.5;\\n    float x = 1.0 - clamp(abs(mid-value)/range, 0.0, 1.0);\\n    return smoothstep(0.0, 1.0, x);\\n}\\n\\n\" + getColorFun + \"\\n\" + output + \"\\n\\nvoid main(){\\n    float intensity = smoothstep(0.0, 1.0, texture2D(source, texcoord).r);\\n    vec3 color = getColor(intensity);\\n    gl_FragColor = alphaFun(color, intensity);\\n}\")\r\n      });\r\n      if (this.width == null) {\r\n        this.width = this.canvas.offsetWidth || 2;\r\n      }\r\n      if (this.height == null) {\r\n        this.height = this.canvas.offsetHeight || 2;\r\n      }\r\n      this.canvas.width = this.width;\r\n      this.canvas.height = this.height;\r\n      this.gl.viewport(0, 0, this.width, this.height);\r\n      this.quad = this.gl.createBuffer();\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.quad);\r\n      quad = new Float32Array([-1, -1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, 1, 0, 1, 1, -1, 0, 1, 1, 1, 0, 1]);\r\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, quad, this.gl.STATIC_DRAW);\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null);\r\n      this.heights = new Heights(this, this.gl, this.width, this.height);\r\n    }\r\n\r\n    WebGLHeatmap.prototype.adjustSize = function() {\r\n      var canvasHeight, canvasWidth;\r\n      canvasWidth = this.canvas.offsetWidth || 2;\r\n      canvasHeight = this.canvas.offsetHeight || 2;\r\n      if (this.width !== canvasWidth || this.height !== canvasHeight) {\r\n        this.gl.viewport(0, 0, canvasWidth, canvasHeight);\r\n        this.canvas.width = canvasWidth;\r\n        this.canvas.height = canvasHeight;\r\n        this.width = canvasWidth;\r\n        this.height = canvasHeight;\r\n        return this.heights.resize(this.width, this.height);\r\n      }\r\n    };\r\n\r\n    WebGLHeatmap.prototype.display = function() {\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.quad);\r\n      this.gl.vertexAttribPointer(0, 4, this.gl.FLOAT, false, 0, 0);\r\n      this.heights.nodeFront.bind(0);\r\n      if (this.gradientTexture) {\r\n        this.gradientTexture.bind(1);\r\n      }\r\n      this.shader.use().int('source', 0).int('gradientTexture', 1);\r\n      return this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n    };\r\n\r\n    WebGLHeatmap.prototype.update = function() {\r\n      return this.heights.update();\r\n    };\r\n\r\n    WebGLHeatmap.prototype.clear = function() {\r\n      return this.heights.clear();\r\n    };\r\n\r\n    WebGLHeatmap.prototype.clamp = function(min, max) {\r\n      if (min == null) {\r\n        min = 0;\r\n      }\r\n      if (max == null) {\r\n        max = 1;\r\n      }\r\n      return this.heights.clamp(min, max);\r\n    };\r\n\r\n    WebGLHeatmap.prototype.multiply = function(value) {\r\n      if (value == null) {\r\n        value = 0.95;\r\n      }\r\n      return this.heights.multiply(value);\r\n    };\r\n\r\n    WebGLHeatmap.prototype.blur = function() {\r\n      return this.heights.blur();\r\n    };\r\n\r\n    WebGLHeatmap.prototype.addPoint = function(x, y, size, intensity) {\r\n      return this.heights.addPoint(x, y, size, intensity);\r\n    };\r\n\r\n    WebGLHeatmap.prototype.addPoints = function(items) {\r\n      var item, _i, _len, _results;\r\n      _results = [];\r\n      for (_i = 0, _len = items.length; _i < _len; _i++) {\r\n        item = items[_i];\r\n        _results.push(this.addPoint(item.x, item.y, item.size, item.intensity));\r\n      }\r\n      return _results;\r\n    };\r\n\r\n    return WebGLHeatmap;\r\n\r\n  })();\r\n\r\n  window.createWebGLHeatmap = function(params) {\r\n    return new WebGLHeatmap(params);\r\n  };\r\n\r\n}).call(this);\r\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_modules__[839]();\nvar __webpack_exports__ = {};\n__webpack_modules__[886]();\n"],"names":["L","WebGLHeatMap","Renderer","extend","version","options","size","units","opacity","gradientTexture","alphaRange","padding","_initContainer","t","this","_container","DomUtil","create","i","id","Util","stamp","style","position","gl","window","createWebGLHeatmap","canvas","console","error","clear","update","multiply","addPoint","display","adjustSize","onAdd","prototype","call","resize","_destroyContainer","remove","DomEvent","off","getEvents","move","throttle","_update","_map","getSize","width","x","height","y","draw","reposition","_getMapPanePos","multiplyBy","setPosition","e","data","n","length","a","Math","floor","o","bind","s","_multiply","r","l","h","latLng","d","latLngToContainerPoint","_scalem","cos","PI","lat","LatLng","lng","latLngToLayerPoint","max","round","_scalepx","addDataPoint","push","setData","webGLHeatmap","Framebuffer","Heights","Node","Shader","Texture","WebGLHeatmap","fragmentShaderBlit","textureFloatShims","vertexShaderBlit","getExtension","getSupportedExtensions","vendorRe","vendors","__indexOf","indexOf","item","checkColorBuffer","checkFloatLinear","checkSupport","checkTexture","createSourceCanvas","name","shimExtensions","shimLookup","unshimExtensions","unshimLookup","_i","_len","ctx","imageData","document","createElement","getContext","getImageData","set","Uint8ClampedArray","putImageData","sourceType","buffer","cleanup","fragmentShader","framebuffer","positionLoc","program","readBuffer","result","source","sourceCanvas","sourceLoc","target","vertexShader","vertices","createProgram","createShader","VERTEX_SHADER","attachShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","FRAGMENT_SHADER","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","deleteShader","deleteProgram","deleteBuffer","deleteTexture","deleteFramebuffer","bindBuffer","ARRAY_BUFFER","bindTexture","TEXTURE_2D","bindFramebuffer","FRAMEBUFFER","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","createFramebuffer","framebufferTexture2D","COLOR_ATTACHMENT0","Float32Array","createBuffer","bufferData","STATIC_DRAW","getAttribLocation","getUniformLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform1i","drawArrays","TRIANGLES","Uint8Array","readPixels","abs","targetType","getError","check","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","halfFloatExt","halfFloatTexturing","singleFloatTexturing","_error","OES_texture_float","shim","WEBGL_color_buffer_float","RGBA32F_EXT","RGB32F_EXT","FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT","UNSIGNED_NORMALIZED_EXT","OES_texture_float_linear","OES_texture_half_float","HALF_FLOAT_OES","EXT_color_buffer_half_float","RGBA16F_EXT","RGB16F_EXT","OES_texture_half_float_linear","WebGLRenderingContext","extobj","extension","supported","_j","_k","_len1","_len2","getFloatExtension","spec","candidate","candidates","half","halfFramebuffer","halfLinear","halfTexture","importance","preference","single","singleFramebuffer","singleLinear","singleTexture","use","_l","_len3","_len4","_m","_ref","_ref1","_ref2","prefer","require","throws","texture","filterable","renderable","score","precision","type","pow","sort","b","join","match","vendor","_arg","fragment","vertex","vs","fs","link","value_cache","uniform_cache","attribCache","attribLocation","location","shader","uniformLoc","int","value","loc","vec2","uniform2f","float","uniform1f","destroy","deleteFRamebuffer","unbind","FRAMEBUFFER_UNSUPPORTED","FRAMEBUFFER_INCOMPLETE_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_DIMENSIONS","FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","color","handle","depth","framebufferRenderbuffer","DEPTH_ATTACHMENT","RENDERBUFFER","params","channels","toUpperCase","chancount","RGB","LUMINANCE_ALPHA","unit","activeTexture","TEXTURE0","setSize","upload","linear","nearest","NEAREST","clampToEdge","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","repeat","REPEAT","floatExt","fbo","end","heatmap","clampShader","multiplyShader","blurShader","nodeBack","nodeFront","vertexBuffer","vertexSize","maxPointCount","vertexBufferData","vertexBufferViews","bufferIndex","pointCount","intensityLoc","enable","BLEND","STREAM_DRAW","disableVertexAttribArray","disable","clearColor","COLOR_BUFFER_BIT","clamp","min","quad","swap","blur","tmp","addVertex","xs","ys","intensity","alphaEnd","alphaStart","getColorFun","image","intensityToAlpha","output","textureGradient","antialias","WebGLDebugUtils","log","makeDebugContext","err","funcName","args","glEnumToString","blendFunc","ONE","Image","onload","src","toFixed","offsetWidth","offsetHeight","viewport","heights","canvasHeight","canvasWidth","addPoints","items","_results","__webpack_modules__"],"sourceRoot":""}